#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

set -e  # –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

PROJECT_DIR="/home/workdir/cash_shifts"
cd "$PROJECT_DIR"

echo "======================================================"
echo "üöÄ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –î–ï–ü–õ–û–ô CASH SHIFTS –ù–ê –ü–†–û–î–ê–ö–®–ù"
echo "======================================================"
echo ""

# –®–∞–≥ 1: –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã (–æ–Ω–∏ –º–æ–≥—É—Ç –ø–∞–¥–∞—Ç—å –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π)
echo "üìù –®–∞–≥ 1: –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã (–¥–µ–ø–ª–æ–π –±–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)..."
echo ""

# if ./run_tests.sh; then
#     echo ""
#     echo "‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!"
# else
#     echo ""
#     echo "‚ùå –û–®–ò–ë–ö–ê: –¢–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—à–ª–∏!"
#     echo "–î–µ–ø–ª–æ–π –æ—Ç–º–µ–Ω–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
#     exit 1
# fi

echo ""
echo "======================================================"

# –®–∞–≥ 2: –î–µ–ø–ª–æ–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω
echo "üì¶ –®–∞–≥ 2: –î–µ–ø–ª–æ–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä..."
echo ""

# –ó–∞–ø—É—Å–∫–∞–µ–º Python —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
if ./venv/bin/python auto_deploy.py; then
    echo ""
    echo "‚úÖ –î–µ–ø–ª–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!"
else
    echo ""
    echo "‚ùå –û–®–ò–ë–ö–ê: –î–µ–ø–ª–æ–π –Ω–µ —É–¥–∞–ª—Å—è!"
    exit 1
fi

echo ""
echo "======================================================"
echo "üéâ –í–°–ï –ì–û–¢–û–í–û!"
echo "üåê –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ: https://cashshifts.tsyndra.ru"
echo "======================================================"

